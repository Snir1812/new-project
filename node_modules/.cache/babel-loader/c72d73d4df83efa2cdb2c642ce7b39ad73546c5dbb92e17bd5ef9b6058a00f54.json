{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  products: [],\n  token: sessionStorage.getItem(\"token\"),\n  isLoading: false,\n  isError: false,\n  showLoginForm: false,\n  showPasswordRecoveryForm: false,\n  showSignupForm: false\n};\nexport const fetchProducts = () => {\n  return (dispatch, getState) => {\n    dispatch(setIsLoading(true));\n    fetch(\"https://localhost:7201/api/Products\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }).then(data => {\n      dispatch(setItems(data));\n      // console.log(data);\n    }).catch(error => {\n      console.error(error);\n      dispatch(setIsError(true));\n    }).finally(() => {\n      dispatch(setIsLoading(false));\n    });\n  };\n};\nconst formSlice = createSlice({\n  name: \"form\",\n  initialState,\n  reducers: {\n    setItems: (state, action) => {\n      state.products = action.payload;\n    },\n    setIsLoading: (state, action) => {\n      state.isLoading = action.payload;\n    },\n    setIsError: (state, action) => {\n      state.isError = action.payload;\n    },\n    openLoginForm: state => {\n      state.showLoginForm = true;\n    },\n    closeLoginForm: state => {\n      state.showLoginForm = false;\n    },\n    openPasswordRecoveryForm: state => {\n      state.showPasswordRecoveryForm = true;\n    },\n    closePasswordRecoveryForm: state => {\n      state.showPasswordRecoveryForm = false;\n    },\n    openSignupForm: state => {\n      state.showSignupForm = true;\n    },\n    closeSignupForm: state => {\n      state.showSignupForm = false;\n    },\n    updateItem: (state, action) => {\n      const index = state.items.indexOf(state.productToEdit);\n      if (index >= 0) {\n        state.items[index] = action.payload;\n      }\n    },\n    addItem: (state, action) => {\n      state.items.push(action.payload);\n    },\n    setProductForm: (state, action) => {\n      state.productToEdit = null;\n      state.showProductForm = action.payload;\n    },\n    toggleProductForm: state => {\n      return {\n        ...state,\n        productToEdit: null,\n        showProductForm: !state.showProductForm\n      };\n    }\n  }\n});\nexport default formSlice.reducer;\nexport const {\n  openLoginForm,\n  closeLoginForm,\n  openPasswordRecoveryForm,\n  closePasswordRecoveryForm,\n  openSignupForm,\n  closeSignupForm,\n  setItems,\n  setIsLoading,\n  setIsError,\n  updateItem,\n  addItem,\n  setProductForm,\n  toggleProductForm\n} = formSlice.actions;","map":{"version":3,"names":["createSlice","initialState","products","token","sessionStorage","getItem","isLoading","isError","showLoginForm","showPasswordRecoveryForm","showSignupForm","fetchProducts","dispatch","getState","setIsLoading","fetch","method","headers","Authorization","localStorage","then","response","ok","Error","status","json","data","setItems","catch","error","console","setIsError","finally","formSlice","name","reducers","state","action","payload","openLoginForm","closeLoginForm","openPasswordRecoveryForm","closePasswordRecoveryForm","openSignupForm","closeSignupForm","updateItem","index","items","indexOf","productToEdit","addItem","push","setProductForm","showProductForm","toggleProductForm","reducer","actions"],"sources":["C:/Users/sales/OneDrive/שולחן העבודה/Snir Projects/New Project/new-project/src/features/form-slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  products: [],\r\n  token: sessionStorage.getItem(\"token\"),\r\n  isLoading: false,\r\n  isError: false,\r\n  showLoginForm: false,\r\n  showPasswordRecoveryForm: false,\r\n  showSignupForm: false,\r\n};\r\n\r\nexport const fetchProducts = () => {\r\n  return (dispatch, getState) => {\r\n    dispatch(setIsLoading(true));\r\n\r\n    fetch(\"https://localhost:7201/api/Products\", {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.status);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        dispatch(setItems(data));\r\n        // console.log(data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        dispatch(setIsError(true));\r\n      })\r\n      .finally(() => {\r\n        dispatch(setIsLoading(false));\r\n      });\r\n  };\r\n};\r\n\r\nconst formSlice = createSlice({\r\n  name: \"form\",\r\n  initialState,\r\n  reducers: {\r\n    setItems: (state, action) => {\r\n      state.products = action.payload;\r\n    },\r\n    setIsLoading: (state, action) => {\r\n      state.isLoading = action.payload;\r\n    },\r\n    setIsError: (state, action) => {\r\n      state.isError = action.payload;\r\n    },\r\n    openLoginForm: (state) => {\r\n      state.showLoginForm = true;\r\n    },\r\n    closeLoginForm: (state) => {\r\n      state.showLoginForm = false;\r\n    },\r\n    openPasswordRecoveryForm: (state) => {\r\n      state.showPasswordRecoveryForm = true;\r\n    },\r\n    closePasswordRecoveryForm: (state) => {\r\n      state.showPasswordRecoveryForm = false;\r\n    },\r\n    openSignupForm: (state) => {\r\n      state.showSignupForm = true;\r\n    },\r\n    closeSignupForm: (state) => {\r\n      state.showSignupForm = false;\r\n    },\r\n    updateItem: (state, action) => {\r\n      const index = state.items.indexOf(state.productToEdit);\r\n      if (index >= 0) {\r\n        state.items[index] = action.payload;\r\n      }\r\n    },\r\n    addItem: (state, action) => {\r\n      state.items.push(action.payload);\r\n    },\r\n    setProductForm: (state, action) => {\r\n      state.productToEdit = null;\r\n      state.showProductForm = action.payload;\r\n    },\r\n    toggleProductForm: (state) => {\r\n      return {\r\n        ...state,\r\n        productToEdit: null,\r\n        showProductForm: !state.showProductForm,\r\n      };\r\n    },\r\n  },\r\n});\r\n\r\nexport default formSlice.reducer;\r\nexport const {\r\n  openLoginForm,\r\n  closeLoginForm,\r\n  openPasswordRecoveryForm,\r\n  closePasswordRecoveryForm,\r\n  openSignupForm,\r\n  closeSignupForm,\r\n  setItems,\r\n  setIsLoading,\r\n  setIsError,\r\n  updateItem,\r\n  addItem,\r\n  setProductForm,\r\n  toggleProductForm,\r\n} = formSlice.actions;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}