{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nconst initialState = {\n  products: [],\n  token: sessionStorage.getItem(\"token\"),\n  isLoading: false,\n  isError: false,\n  showLoginForm: false,\n  showPasswordRecoveryForm: false,\n  showSignupForm: false\n};\nexport const fetchProducts = () => {\n  return (dispatch, getState) => {\n    dispatch(setIsLoading(true));\n    fetch(\"https://localhost:7201/api/Products\", {\n      method: \"get\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n      }\n    }).then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n      return response.json();\n    }).then(data => {\n      dispatch(setItems(data));\n      // console.log(data);\n    }).catch(error => {\n      console.error(error);\n      dispatch(setIsLoading(false));\n    }).finally(() => {\n      dispatch(setIsLoading(false));\n    });\n  };\n};\nconst formSlice = createSlice({\n  name: \"form\",\n  initialState,\n  reducers: {\n    setItems: (state, action) => {\n      state.products = action.payload;\n    },\n    setIsLoading: (state, action) => {\n      state.isLoading = action.payload;\n    },\n    SetIsError: (state, action) => {\n      state.isError = action.payload;\n    },\n    openLoginForm: state => {\n      state.showLoginForm = true;\n    },\n    closeLoginForm: state => {\n      state.showLoginForm = false;\n    },\n    openPasswordRecoveryForm: state => {\n      state.showPasswordRecoveryForm = true;\n    },\n    closePasswordRecoveryForm: state => {\n      state.showPasswordRecoveryForm = false;\n    },\n    openSignupForm: state => {\n      state.showSignupForm = true;\n    },\n    closeSignupForm: state => {\n      state.showSignupForm = false;\n    }\n  }\n});\nexport default formSlice.reducer;\nexport const {\n  openLoginForm,\n  closeLoginForm,\n  openPasswordRecoveryForm,\n  closePasswordRecoveryForm,\n  openSignupForm,\n  closeSignupForm,\n  setItems,\n  setIsLoading\n} = formSlice.actions;","map":{"version":3,"names":["createSlice","initialState","products","token","sessionStorage","getItem","isLoading","isError","showLoginForm","showPasswordRecoveryForm","showSignupForm","fetchProducts","dispatch","getState","setIsLoading","fetch","method","headers","Authorization","localStorage","then","response","ok","Error","status","json","data","setItems","catch","error","console","finally","formSlice","name","reducers","state","action","payload","SetIsError","openLoginForm","closeLoginForm","openPasswordRecoveryForm","closePasswordRecoveryForm","openSignupForm","closeSignupForm","reducer","actions"],"sources":["C:/Users/sales/OneDrive/שולחן העבודה/Snir Projects/New Project/new-project/src/features/form-slice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\r\n\r\nconst initialState = {\r\n  products: [],\r\n  token: sessionStorage.getItem(\"token\"),\r\n  isLoading: false,\r\n  isError: false,\r\n  showLoginForm: false,\r\n  showPasswordRecoveryForm: false,\r\n  showSignupForm: false,\r\n};\r\n\r\nexport const fetchProducts = () => {\r\n  return (dispatch, getState) => {\r\n    dispatch(setIsLoading(true));\r\n\r\n    fetch(\"https://localhost:7201/api/Products\", {\r\n      method: \"get\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: \"Bearer \" + localStorage.getItem(\"token\"),\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (!response.ok) {\r\n          throw new Error(response.status);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        dispatch(setItems(data));\r\n        // console.log(data);\r\n      })\r\n      .catch((error) => {\r\n        console.error(error);\r\n        dispatch(setIsLoading(false));\r\n      })\r\n      .finally(() => {\r\n        dispatch(setIsLoading(false));\r\n      });\r\n  };\r\n};\r\n\r\nconst formSlice = createSlice({\r\n  name: \"form\",\r\n  initialState,\r\n  reducers: {\r\n    setItems: (state, action) => {\r\n      state.products = action.payload;\r\n    },\r\n    setIsLoading: (state, action) => {\r\n      state.isLoading = action.payload;\r\n    },\r\n    SetIsError: (state, action) => {\r\n      state.isError = action.payload;\r\n    },\r\n    openLoginForm: (state) => {\r\n      state.showLoginForm = true;\r\n    },\r\n    closeLoginForm: (state) => {\r\n      state.showLoginForm = false;\r\n    },\r\n    openPasswordRecoveryForm: (state) => {\r\n      state.showPasswordRecoveryForm = true;\r\n    },\r\n    closePasswordRecoveryForm: (state) => {\r\n      state.showPasswordRecoveryForm = false;\r\n    },\r\n    openSignupForm: (state) => {\r\n      state.showSignupForm = true;\r\n    },\r\n    closeSignupForm: (state) => {\r\n      state.showSignupForm = false;\r\n    },\r\n  },\r\n});\r\n\r\nexport default formSlice.reducer;\r\nexport const {\r\n  openLoginForm,\r\n  closeLoginForm,\r\n  openPasswordRecoveryForm,\r\n  closePasswordRecoveryForm,\r\n  openSignupForm,\r\n  closeSignupForm,\r\n  setItems,\r\n  setIsLoading,\r\n} = formSlice.actions;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}